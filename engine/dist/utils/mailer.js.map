{"version":3,"file":"mailer.js","sourceRoot":"/","sources":["utils/mailer.ts"],"names":[],"mappings":";;;AAAA,oEAAyD;AACzD,wDAAwB;AACxB,+DAA+B;AAE/B,oDAAoD;AACpD,wDAAwD;AACxD,yBAAyB;AACzB,IAAI;AAEJ,oBAAoB;AAEpB,MAAM,IAAI,GAAG,gBAAM,CAAC,IAAI,CAAC;AAEzB,MAAM,WAAW,GAAG,oBAAU,CAAC,eAAe,iCACzC,IAAI,KACP,IAAI,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,IAC1C,CAAC;AAEH,SAAe,SAAS,CAAC,OAAuB;;QAC5C,WAAW,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,GAAO,EAAC,IAAQ,EAAE,EAAE;YAC/C,IAAG,GAAG,EAAC;gBACH,aAAG,CAAC,KAAK,CAAC,GAAG,EAAC,oBAAoB,CAAC,CAAA;aACtC;YAED,aAAG,CAAC,IAAI,CAAC,gBAAgB,oBAAU,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;QAClE,CAAC,CAAC,CAAA;IACN,CAAC;CAAA;AAED,kBAAe,SAAS,CAAA","sourcesContent":["import nodemailer, { SendMailOptions } from 'nodemailer';\r\nimport log from './log';\r\nimport config from '../config';\r\n\r\n// export default async function createTestCreds() {\r\n//   const creds = await nodemailer.createTestAccount();\r\n//     console.log(creds)\r\n// }\r\n\r\n// createTestCreds()\r\n\r\nconst smtp = config.smtp;\r\n\r\nconst transporter = nodemailer.createTransport({\r\n  ...smtp,\r\n  auth: { user: smtp.user, pass: smtp.pass },\r\n});\r\n\r\nasync function sendEmail(payload:SendMailOptions){\r\n    transporter.sendMail(payload, (err:any,info:any) => {\r\n        if(err){\r\n            log.error(err,\"Error sending mail\")\r\n        }\r\n\r\n        log.info(`Preview URL: ${nodemailer.getTestMessageUrl(info)}`)\r\n    })\r\n}\r\n\r\nexport default sendEmail\r\n"]}
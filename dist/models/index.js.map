{"version":3,"file":"index.js","sourceRoot":"/","sources":["models/index.ts"],"names":[],"mappings":";;;AAAA,uCAAmC;AAEnC,+DAA+B;AAE/B,OAAO;AACP,+DAA+B;AAE/B,WAAW;AACX,oEAAoC;AAEpC,UAAU;AACV,gEAAyC;AAEzC,eAAe;AACf,4DAA4B;AAS5B,SAA8B,MAAM,CAAC,MAAoB;;QACvD,IAAI;YACF,MAAM,IAAA,kBAAO,EAAC,MAAM,CAAC,GAAG,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;YAC/C,aAAG,CAAC,IAAI,CAAC,oCAAoC,CAAC,CAAC;YAE/C,MAAM,cAAI,CAAC,gBAAgB,EAAE,CAAC;YAC9B,MAAM,mBAAS,CAAC,gBAAgB,EAAE,CAAC;YACnC,MAAM,iBAAgB,CAAC,gBAAgB,EAAE,CAAC;YAC1C,MAAM,eAAK,CAAC,gBAAgB,EAAE,CAAC;YAE/B,OAAO;gBACL,IAAI,EAAJ,cAAI;gBACJ,SAAS,EAAT,mBAAS;gBACT,gBAAgB,EAAhB,iBAAgB;gBAChB,KAAK,EAAL,eAAK;aACN,CAAC;SACH;QAAC,OAAO,CAAC,EAAE;YACV,MAAM,IAAI,KAAK,CAAC,wCAAwC,CAAC,EAAE,CAAC,CAAC;SAC9D;IACH,CAAC;CAAA;AAnBD,yBAmBC","sourcesContent":["import { connect } from 'mongoose';\r\nimport { Config } from '../config';\r\nimport log from '../utils/log';\r\n\r\n// user\r\nimport User from './user/user';\r\n\r\n//apartment\r\nimport Apartment from './apartment';\r\n\r\n// booking\r\nimport ApartmentBooking from './booking';\r\n\r\n// image upload\r\nimport Image from './image';\r\n\r\nexport interface IModels {\r\n  User: typeof User;\r\n  Apartment: typeof Apartment;\r\n  ApartmentBooking: typeof ApartmentBooking;\r\n  Image: typeof Image;\r\n}\r\n\r\nexport default async function initDB(config: Config['db']): Promise<IModels> {\r\n  try {\r\n    await connect(config.uri, { autoIndex: true });\r\n    log.info('Connected to database successfully');\r\n\r\n    await User.createCollection();\r\n    await Apartment.createCollection();\r\n    await ApartmentBooking.createCollection();\r\n    await Image.createCollection();\r\n\r\n    return {\r\n      User,\r\n      Apartment,\r\n      ApartmentBooking,\r\n      Image\r\n    };\r\n  } catch (e) {\r\n    throw new Error(`Error while connecting to database : ${e}`);\r\n  }\r\n}\r\n"]}
{"version":3,"file":"context.js","sourceRoot":"/","sources":["middlewares/context.ts"],"names":[],"mappings":";;;;AAAA,0CAA2C;AAEpC,MAAM,UAAU,GAAG,CAAO,EAAE,GAAG,EAAE,EAAE,EAAE;IAC1C,IAAI;QACF,MAAM,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,aAAa,IAAI,EAAE,CAAC;QAE9C,IAAI,KAAK,EAAE;YACT,MAAM,OAAO,GAAQ,MAAM,IAAA,iBAAS,EAAC,KAAK,CAAC,CAAC;YAE5C,MAAM,EAAE,GAAG,OAAO,CAAC,GAAG,CAAC;YAEvB,MAAM,IAAI,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC;YAEzB,OAAO,EAAE,IAAI,EAAE,CAAC;SACjB;KACF;IAAC,OAAO,GAAG,EAAE;QACZ,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;KAClB;AACH,CAAC,CAAA,CAAC;AAhBW,QAAA,UAAU,cAgBrB","sourcesContent":["import { verifyJwt } from '../utils/token';\r\n\r\nexport const setContext = async ({ req }) => {\r\n  try {\r\n    const token = req.headers.authorization || '';\r\n    \r\n    if (token) {\r\n      const decoded: any = await verifyJwt(token);\r\n\r\n      const id = decoded._id;\r\n\r\n      const user = { _id: id };\r\n\r\n      return { user };\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n"]}